/* 
 * routing_table.c
 * 
 *  Created on: Dec 9, 2019
 *      Author: Finlay Miller, Derek Capone
 * 
 * For our routing table the row index indicates the hall sensor where the
 * train IS, and the column indicates the hall sensor that the train wishes to
 * go to. We've split the routing table into blocks so that its actually 
 * readable, maybe it can be concatenated later. Each entry in the table is a 
 * mag_dir struct as defined in train_app.h. Magnitudes are chosen so that the train
 * slows as it approaches its destination. 0 is included so that indices 
 * correspond exactly with hall sensor numbers. 
 * 
 * Given that we didn't have time to implement switching, there are some 
 * inefficiencies, such as when at sensor 21 or 22 moving to any station
 * (other than 22 or 21, respectively) will require looping around the track. 
 * Likewise for 24 and 23, or, say moving from 19 to 10. This also means that
 * travelling from siding to siding directly is not possible.
 * 
 * Speeds 1-9 are used for everyday transport, and 10-15 are reserved for 
 * emergency overrides. For the comfort of the passengers of course.
 * 
 * The plan for concatenation was to have a master routing table laid out as
 * shown below:
 * 
 *      static struct mag_dir master_rOOter[] = 
 *      {
 *         r00ting_tbl1, r00ting_tbl2, r00ting_tbl3, r00ting_tbl4, r00ting_tbl5 
 *      }
 * 
 * Since we didn't have time to test this we aren't sure the concatenation
 * would work. If it didn't we were just going to make one hugge 25x25 table,
 * readability be damned.
 */

#include "routing_table.h"


static struct mag_dir rOOting_tbl1[25][5] = 
{//            0          1          2          3          4
/*                           LOOP                                */
/* 00 */ { {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0} },
/* 01 */ { {0, 0, 0}, {0, 0, 0}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0} },
/* 02 */ { {0, 0, 0}, {1, 0, 1}, {0, 0, 0}, {1, 0, 0}, {2, 0, 0} },
/* 03 */ { {0, 0, 0}, {2, 0, 1}, {1, 0, 1}, {0, 0, 0}, {1, 0, 0} },
/* 04 */ { {0, 0, 0}, {3, 0, 1}, {2, 0, 1}, {1, 0, 1}, {0, 0, 0} },
/* 05 */ { {0, 0, 0}, {4, 0, 1}, {3, 0, 1}, {2, 0, 1}, {1, 0, 1} },
/* 06 */ { {0, 0, 0}, {5, 0, 1}, {4, 0, 1}, {3, 0, 1}, {2, 0, 1} },
/* 07 */ { {0, 0, 0}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}, {3, 0, 1} },
/* 08 */ { {0, 0, 0}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1} },
/* 09 */ { {0, 0, 0}, {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1} },
/* 10 */ { {0, 0, 0}, {7, 0, 0}, {8, 0, 1}, {7, 0, 1}, {6, 0, 1} },
/* 11 */ { {0, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 1}, {7, 0, 1} },
/* 12 */ { {0, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 1} },
/* 13 */ { {0, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0} },
/* 14 */ { {0, 0, 0}, {3, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0} },
/* 15 */ { {0, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0}, {5, 0, 0} },
/* 16 */ { {0, 0, 0}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0} },
/*                         SIDINGS                               */
/* 17 */ { {0, 0, 0}, {1, 0, 1}, {9, 0, 1}, {9, 0, 1}, {9, 0, 1} },
/* 18 */ { {0, 0, 0}, {4, 0, 1}, {9, 0, 0}, {9, 0, 0}, {9, 0, 0} },
/* 19 */ { {0, 0, 0}, {7, 0, 1}, {7, 0, 1}, {6, 0, 1}, {6, 0, 1} },
/* 20 */ { {0, 0, 0}, {6, 0, 0}, {6, 0, 0}, {6, 0, 0}, {7, 0, 0} },
/*                       PASSING LOOP                            */
/* 21 */ { {0, 0, 0}, {4, 0, 1}, {3, 0, 1}, {1, 0, 1}, {9, 0, 1} },
/* 22 */ { {0, 0, 0}, {6, 0, 1}, {4, 0, 1}, {2, 0, 1}, {9, 0, 1} },
/* 23 */ { {0, 0, 0}, {8, 0, 1}, {8, 0, 1}, {7, 0, 1}, {8, 0, 1} },
/* 24 */ { {0, 0, 0}, {9, 0, 1}, {9, 0, 1}, {8, 0, 1}, {9, 0, 1} }
};

static struct mag_dir rOOting_tbl2[25][5] = 
{//            5          6          7          8          9
/*                           LOOP                                */
/* 00 */ { {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}  },
/* 01 */ { {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 1}  },
/* 02 */ { {3, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}  },
/* 03 */ { {2, 0, 0}, {3, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}  },
/* 04 */ { {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0}, {5, 0, 0}  },
/* 05 */ { {0, 0, 0}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0}  },
/* 06 */ { {1, 0, 1}, {0, 0, 1}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0}  },
/* 07 */ { {2, 0, 1}, {1, 0, 1}, {0, 0, 0}, {1, 0, 0}, {2, 0, 0}  },
/* 08 */ { {3, 0, 1}, {2, 0, 1}, {1, 0, 1}, {0, 0, 0}, {1, 0, 0}  },
/* 09 */ { {4, 0, 1}, {3, 0, 1}, {2, 0, 1}, {1, 0, 1}, {0, 0, 0}  },
/* 10 */ { {5, 0, 1}, {4, 0, 1}, {3, 0, 1}, {2, 0, 1}, {1, 0, 1}  },
/* 11 */ { {6, 0, 1}, {5, 0, 1}, {4, 0, 1}, {3, 0, 1}, {2, 0, 1}  },
/* 12 */ { {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}, {3, 0, 1}  },
/* 13 */ { {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}  },
/* 14 */ { {7, 0, 0}, {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}  },
/* 15 */ { {6, 0, 0}, {7, 0, 0}, {8, 0, 1}, {7, 0, 1}, {6, 0, 1}  },
/* 16 */ { {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 1}, {7, 0, 1}  },
/*                         SIDINGS                                */
/* 17 */ { {9, 0, 1}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0}  },
/* 18 */ { {9, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}  },
/* 19 */ { {6, 0, 0}, {4, 0, 1}, {3, 0, 1}, {2, 0, 1}, {1, 0, 1}  },
/* 20 */ { {7, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}  },
/*                       PASSING LOOP                             */
/* 21 */ { {9, 0, 1}, {9, 0, 1}, {8, 0, 1}, {8, 0, 1}, {7, 0, 1}  },
/* 22 */ { {9, 0, 1}, {9, 0, 1}, {9, 0, 1}, {9, 0, 1}, {8, 0, 1}  },
/* 23 */ { {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}, {3, 0, 1}  },
/* 24 */ { {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}  }
};

static struct mag_dir rOOting_tbl3[25][5] = 
{//           10         11         12         13         14    
/*                           LOOP                                */
/* 00 */ { {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}  },
/* 01 */ { {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}, {3, 0, 1}  },
/* 02 */ { {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {4, 0, 1}  },
/* 03 */ { {7, 0, 0}, {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}  },
/* 04 */ { {6, 0, 0}, {7, 0, 0}, {8, 0, 1}, {7, 0, 1}, {6, 0, 1}  },
/* 05 */ { {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 1}, {7, 0, 1}  },
/* 06 */ { {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 1}  },
/* 07 */ { {3, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}  },
/* 08 */ { {2, 0, 0}, {3, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}  },
/* 09 */ { {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0}, {5, 0, 0}  },
/* 10 */ { {0, 0, 0}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0}  },
/* 11 */ { {1, 0, 1}, {0, 0, 0}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0}  },
/* 12 */ { {2, 0, 1}, {1, 0, 1}, {0, 0, 0}, {1, 0, 0}, {2, 0, 0}  },
/* 13 */ { {3, 0, 1}, {2, 0, 1}, {1, 0, 1}, {0, 0, 0}, {1, 0, 0}  },
/* 14 */ { {4, 0, 1}, {3, 0, 1}, {2, 0, 1}, {1, 0, 1}, {0, 0, 0}  },
/* 15 */ { {5, 0, 1}, {4, 0, 1}, {3, 0, 1}, {2, 0, 1}, {1, 0, 1}  },
/* 16 */ { {6, 0, 1}, {5, 0, 1}, {4, 0, 1}, {3, 0, 1}, {2, 0, 1}  },
/*                         SIDINGS                                */
/* 17 */ { {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {5, 0, 1}  },
/* 18 */ { {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 0}, {7, 0, 1}  },
/* 19 */ { {9, 0, 1}, {9, 0, 1}, {8, 0, 1}, {8, 0, 1}, {4, 0, 0}  },
/* 20 */ { {8, 0, 0}, {8, 0, 0}, {9, 0, 0}, {9, 0, 0}, {1, 0, 0}  },
/*                       PASSING LOOP                             */
/* 21 */ { {8, 0, 1}, {7, 0, 1}, {7, 0, 1}, {7, 0, 1}, {6, 0, 1}  },
/* 22 */ { {9, 0, 1}, {8, 0, 1}, {8, 0, 1}, {8, 0, 1}, {7, 0, 1}  },
/* 23 */ { {2, 0, 1}, {1, 0, 1}, {9, 0, 1}, {9, 0, 1}, {9, 0, 1}  },
/* 24 */ { {3, 0, 1}, {2, 0, 1}, {9, 0, 1}, {9, 0, 1}, {9, 0, 1}  }
};

static struct mag_dir rOOting_tbl5[25][5] = 
{//           15         16         17         18         19    
/*                           LOOP                                */
/* 00 */ { {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}  },
/* 01 */ { {2, 0, 1}, {1, 0, 1}, {1, 0, 0}, {4, 0, 1}, {7, 0, 1}  },
/* 02 */ { {3, 0, 1}, {2, 0, 1}, {8, 0, 0}, {5, 0, 1}, {8, 0, 0}  },
/* 03 */ { {4, 0, 1}, {3, 0, 1}, {7, 0, 0}, {6, 0, 1}, {7, 0, 0}  },
/* 04 */ { {5, 0, 1}, {4, 0, 1}, {6, 0, 0}, {7, 0, 1}, {6, 0, 0}  },
/* 05 */ { {6, 0, 1}, {5, 0, 1}, {5, 0, 0}, {8, 0, 1}, {5, 0, 0}  },
/* 06 */ { {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {1, 0, 1}, {4, 0, 0}  },
/* 07 */ { {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {5, 0, 1}, {3, 0, 0}  },
/* 08 */ { {7, 0, 0}, {8, 0, 1}, {7, 0, 1}, {6, 0, 1}, {2, 0, 0}  },
/* 09 */ { {6, 0, 0}, {7, 0, 0}, {8, 0, 1}, {7, 0, 1}, {1, 0, 0}  },
/* 10 */ { {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 1}, {9, 0, 0}  },
/* 11 */ { {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}, {8, 0, 0}  },
/* 12 */ { {3, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}, {7, 0, 0}  },
/* 13 */ { {2, 0, 0}, {3, 0, 0}, {4, 0, 0}, {5, 0, 0}, {6, 0, 0}  },
/* 14 */ { {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {4, 0, 0}, {3, 0, 1}  },
/* 15 */ { {0, 0, 0}, {1, 0, 0}, {2, 0, 0}, {3, 0, 0}, {1, 0, 1}  },
/* 16 */ { {1, 0, 1}, {0, 0, 0}, {1, 0, 0}, {2, 0, 0}, {2, 0, 1}  },
/*                         SIDINGS                                */
/* 17 */ { {8, 0, 1}, {7, 0, 1}, {0, 0, 0}, {3, 0, 0}, {8, 0, 0}  },
/* 18 */ { {5, 0, 0}, {6, 0, 0}, {3, 0, 1}, {0, 0, 0}, {7, 0, 0}  },
/* 19 */ { {9, 0, 1}, {9, 0, 1}, {8, 0, 1}, {8, 0, 1}, {0, 0, 0}  },
/* 20 */ { {8, 0, 0}, {8, 0, 0}, {9, 0, 0}, {9, 0, 0}, {3, 0, 1}  },
/*                       PASSING LOOP                             */
/* 21 */ { {8, 0, 1}, {7, 0, 1}, {7, 0, 1}, {7, 0, 1}, {6, 0, 1}  },
/* 22 */ { {9, 0, 1}, {8, 0, 1}, {8, 0, 1}, {8, 0, 1}, {7, 0, 1}  },
/* 23 */ { {2, 0, 1}, {1, 0, 1}, {9, 0, 1}, {9, 0, 1}, {9, 0, 1}  },
/* 24 */ { {3, 0, 1}, {2, 0, 1}, {9, 0, 1}, {9, 0, 1}, {9, 0, 1}  }
};

static struct mag_dir rOOting_tbl4[25][5] = 
{//           20         21         22         23         24
/*                           LOOP                                */
/* 00 */ { {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}  },
/* 01 */ { {4, 0, 1}, {3, 0, 0}, {4, 0, 0}, {4, 0, 0}, {3, 0, 0}  },
/* 02 */ { {5, 0, 1}, {2, 0, 0}, {3, 0, 0}, {5, 0, 0}, {4, 0, 0}  },
/* 03 */ { {6, 0, 1}, {1, 0, 0}, {2, 0, 0}, {6, 0, 0}, {5, 0, 0}  },
/* 04 */ { {7, 0, 1}, {9, 0, 0}, {1, 0, 0}, {7, 0, 0}, {6, 0, 0}  },
/* 05 */ { {8, 0, 1}, {9, 0, 0}, {9, 0, 0}, {8, 0, 0}, {7, 0, 0}  },
/* 06 */ { {7, 0, 0}, {9, 0, 0}, {9, 0, 0}, {7, 0, 0}, {8, 0, 0}  },
/* 07 */ { {6, 0, 0}, {9, 0, 0}, {9, 0, 0}, {6, 0, 0}, {7, 0, 0}  },
/* 08 */ { {5, 0, 0}, {9, 0, 0}, {9, 0, 0}, {5, 0, 0}, {6, 0, 0}  },
/* 09 */ { {4, 0, 0}, {9, 0, 0}, {9, 0, 0}, {4, 0, 0}, {5, 0, 0}  },
/* 10 */ { {5, 0, 1}, {9, 0, 0}, {9, 0, 0}, {3, 0, 0}, {4, 0, 0}  },
/* 11 */ { {6, 0, 1}, {9, 0, 0}, {9, 0, 0}, {2, 0, 0}, {3, 0, 0}  },
/* 12 */ { {7, 0, 1}, {8, 0, 0}, {9, 0, 0}, {1, 0, 0}, {2, 0, 0}  },
/* 13 */ { {8, 0, 1}, {7, 0, 0}, {8, 0, 0}, {0, 0, 0}, {1, 0, 0}  },
/* 14 */ { {1, 0, 1}, {6, 0, 0}, {7, 0, 0}, {1, 0, 0}, {0, 0, 0}  },
/* 15 */ { {2, 0, 1}, {5, 0, 0}, {6, 0, 0}, {2, 0, 0}, {1, 0, 0}  },
/* 16 */ { {3, 0, 1}, {4, 0, 0}, {5, 0, 0}, {3, 0, 0}, {2, 0, 0}  },
/*                         SIDINGS                                */
/* 17 */ { {5, 0, 1}, {9, 0, 0}, {9, 0, 0}, {5, 0, 0}, {5, 0, 0}  },
/* 18 */ { {8, 0, 1}, {9, 0, 0}, {9, 0, 0}, {8, 0, 0}, {7, 0, 0}  },
/* 19 */ { {3, 0, 1}, {9, 0, 0}, {8, 0, 0}, {8, 0, 0}, {4, 0, 0}  },
/* 20 */ { {1, 0, 0}, {7, 0, 0}, {6, 0, 0}, {9, 0, 0}, {1, 0, 0}  },
/*                       PASSING LOOP                             */
/* 21 */ { {7, 0, 1}, {0, 0, 0}, {1, 0, 0}, {0, 0, 0}, {0, 0, 0}  },
/* 22 */ { {8, 0, 1}, {1, 0, 1}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}  },
/* 23 */ { {9, 0, 1}, {0, 0, 0}, {0, 0, 0}, {0, 0, 0}, {1, 0, 0}  },
/* 24 */ { {9, 0, 1}, {0, 0, 0}, {0, 0, 0}, {1, 0, 1}, {0, 0, 0}  }
};
